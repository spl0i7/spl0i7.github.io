<!DOCTYPE html>
<html lang=en>
<head>
    <!-- so meta -->
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="HandheldFriendly" content="True">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1" />
    <meta name="description" content="Sometimes when you are behind corporate or university network you mightneed to setup HTTP/HTTPS proxy settings to access the Internet. Setting up  proxy on linux is simple enough, you just need to exp">
<meta property="og:type" content="article">
<meta property="og:title" content="Setting proxy for ArchLinux.">
<meta property="og:url" content="http://ketansingh.net/setting-proxy-for-archlinux/index.html">
<meta property="og:site_name" content="Ketansingh.net">
<meta property="og:description" content="Sometimes when you are behind corporate or university network you mightneed to setup HTTP/HTTPS proxy settings to access the Internet. Setting up  proxy on linux is simple enough, you just need to exp">
<meta property="og:updated_time" content="2016-12-11T03:00:42.000Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Setting proxy for ArchLinux.">
<meta name="twitter:description" content="Sometimes when you are behind corporate or university network you mightneed to setup HTTP/HTTPS proxy settings to access the Internet. Setting up  proxy on linux is simple enough, you just need to exp">
<meta name="twitter:creator" content="@http://twitter.com/sh_ketan">
    
    
        
          
              <link rel="shortcut icon" href="/images/favicon.ico">
          
        
        
          
            <link rel="icon" type="image/png" href="/images/favicon-192x192.png" sizes="192x192">
          
        
        
          
            <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon.png">
          
        
    
    <!-- title -->
    <title>Setting proxy for ArchLinux.</title>
    <!-- styles -->
    <link rel="stylesheet" href="/lib/font-awesome/css/font-awesome.min.css">
    <link rel="stylesheet" href="/lib/meslo-LG/styles.css">
    <link rel="stylesheet" href="/lib/justified-gallery/justifiedGallery.min.css">
    <link rel="stylesheet" href="/css/style.css">
    <!-- rss -->
    
    
    <!-- jquery -->
    <script src="/lib/jquery/jquery.min.js"></script>
</head>

<body>
    
      <div id="header-post">
  <a id="menu-icon" href="#"><i class="fa fa-bars fa-lg"></i></a>
  <a id="menu-icon-tablet" href="#"><i class="fa fa-bars fa-lg"></i></a>
  <a id="top-icon-tablet" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');" style="display:none;"><i class="fa fa-chevron-up fa-lg"></i></a>
  <span id="menu">
    <span id="nav">
      <ul>
         
          <li><a href="/">Home</a></li>
         
          <li><a href="/about/">About</a></li>
         
          <li><a href="/archives/">Writing</a></li>
         
          <li><a href="http://github.com/spl0i7">Projects</a></li>
        
      </ul>
    </span>
    <br/>
    <span id="actions">
      <ul>
        
        <li><a class="icon" href="/make-executable-harder-to-recover-from-memory/"><i class="fa fa-chevron-left" aria-hidden="true" onmouseover='$("#i-prev").toggle();' onmouseout='$("#i-prev").toggle();'></i></a></li>
        
        
        <li><a class="icon" href="/overview-on-linux-userland-rootkits/"><i class="fa fa-chevron-right" aria-hidden="true" onmouseover='$("#i-next").toggle();' onmouseout='$("#i-next").toggle();'></i></a></li>
        
        <li><a class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fa fa-chevron-up" aria-hidden="true" onmouseover='$("#i-top").toggle();' onmouseout='$("#i-top").toggle();'></i></a></li>
        <li><a class="icon" href="#"><i class="fa fa-share-alt" aria-hidden="true" onmouseover='$("#i-share").toggle();' onmouseout='$("#i-share").toggle();' onclick='$("#share").toggle();return false;'></i></a></li>
      </ul>
      <span id="i-prev" class="info" style="display:none;">Previous post</span>
      <span id="i-next" class="info" style="display:none;">Next post</span>
      <span id="i-top" class="info" style="display:none;">Back to top</span>
      <span id="i-share" class="info" style="display:none;">Share post</span>
    </span>
    <br/>
    <div id="share" style="display: none">
      <ul>
  <li><a class="icon" href="http://www.facebook.com/sharer.php?u=http://ketansingh.net/setting-proxy-for-archlinux/"><i class="fa fa-facebook " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="https://twitter.com/share?url=http://ketansingh.net/setting-proxy-for-archlinux/&text=Setting proxy for ArchLinux."><i class="fa fa-twitter " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://www.linkedin.com/shareArticle?url=http://ketansingh.net/setting-proxy-for-archlinux/&title=Setting proxy for ArchLinux."><i class="fa fa-linkedin " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="https://pinterest.com/pin/create/bookmarklet/?url=http://ketansingh.net/setting-proxy-for-archlinux/&is_video=false&description=Setting proxy for ArchLinux."><i class="fa fa-pinterest " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="mailto:?subject=Setting proxy for ArchLinux.&body=Check out this article: http://ketansingh.net/setting-proxy-for-archlinux/"><i class="fa fa-envelope " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="https://getpocket.com/save?url=http://ketansingh.net/setting-proxy-for-archlinux/&title=Setting proxy for ArchLinux."><i class="fa fa-get-pocket " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://reddit.com/submit?url=http://ketansingh.net/setting-proxy-for-archlinux/&title=Setting proxy for ArchLinux."><i class="fa fa-reddit " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://www.stumbleupon.com/submit?url=http://ketansingh.net/setting-proxy-for-archlinux/&title=Setting proxy for ArchLinux."><i class="fa fa-stumbleupon " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://digg.com/submit?url=http://ketansingh.net/setting-proxy-for-archlinux/&title=Setting proxy for ArchLinux."><i class="fa fa-digg " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://www.tumblr.com/share/link?url=http://ketansingh.net/setting-proxy-for-archlinux/&name=Setting proxy for ArchLinux.&description="><i class="fa fa-tumblr " aria-hidden="true"></i></a></li>
</ul>

    </div>
    <div id="toc">
      <ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#1-Pass-on-environment-variables-to-root"><span class="toc-number">1.</span> <span class="toc-text">1) Pass on environment variables to root</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-Set-proxy-for-pacman"><span class="toc-number">2.</span> <span class="toc-text">2) Set proxy for pacman</span></a></li></ol>
    </div>
  </span>
</div>

    
    <div class="content index width mx-auto px2 my4">
        
        <article class="post" itemscope itemtype="http://schema.org/BlogPosting">
  <header>
    
    <h1 class="posttitle" itemprop="name headline">
        Setting proxy for ArchLinux.
    </h1>



    <div class="meta">
      <span class="author" itemprop="author" itemscope itemtype="http://schema.org/Person">
        <span itemprop="name">Ketansingh.net</span>
      </span>
      
    <div class="postdate">
        <time datetime="2016-10-30T04:10:14.000Z" itemprop="datePublished">2016-10-30</time>
    </div>


      
    <div class="article-tag">
        <i class="fa fa-tag"></i>
        <a class="tag-link" href="/tags/linux/">linux</a>
    </div>


    </div>
  </header>
  

  <div class="content" itemprop="articleBody">
    <p>Sometimes when you are behind corporate or university network you might<br>need to setup HTTP/HTTPS proxy settings to access the Internet. Setting up  proxy on linux is simple enough, you just need to export environment variables , you can add to your shell configuration file.</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">export</span> http_proxy=http://&lt;ip&gt;:&lt;port&gt;</div><div class="line"><span class="built_in">export</span> https_proxy=<span class="variable">$http_proxy</span></div></pre></td></tr></table></figure>
<p>But when youâ€™ll try to run your package manager with sudo , these variables will not be passed onto root. This becomes particularly annoying when you have to use AUR repository and it would not build packages in root and when you try to run it with unprivileged user, it fails to download dependencies via pacman. There are two methods to fix this.</p>
<h2 id="1-Pass-on-environment-variables-to-root"><a href="#1-Pass-on-environment-variables-to-root" class="headerlink" title="1) Pass on environment variables to root"></a>1) Pass on environment variables to root</h2><ul>
<li><p>Run to following command to edit sudoers file</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ sudo visudo</div></pre></td></tr></table></figure>
</li>
<li><p>add the following line</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">Defaults env_keep += <span class="string">"https_proxy http_proxy"</span></div></pre></td></tr></table></figure>
</li>
</ul>
<p>this way <em>$https_proxy</em> and <em>$http_proxy</em> will be passed onto root by sudo.<br>Also make sure you have set environment variables for current user. If<br>not then you can add it by editing <strong>.bashrc</strong> if you use bash or<br><strong>~/.config/fish/config.fish</strong> if you use fish like me.<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">export http_proxy=http://&lt;ip&gt;:&lt;port&gt;</div><div class="line">export https_proxy=$http_proxy</div></pre></td></tr></table></figure></p>
<h2 id="2-Set-proxy-for-pacman"><a href="#2-Set-proxy-for-pacman" class="headerlink" title="2) Set proxy for pacman"></a>2) Set proxy for pacman</h2><p>You also directly set proxy for pacman by editing <strong>/etc/pacman.conf</strong></p>
<ul>
<li>open pacman config file by<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ sudo nano nano /etc/pacman.conf</div></pre></td></tr></table></figure>
</li>
</ul>
<p>uncomment <strong>XferCommand</strong> so that it looks like<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">XferCommand = /usr/bin/wget --passive-ftp --proxy=on -c -O %o %u</div></pre></td></tr></table></figure></p>
<p>save it and then open <strong>/etc/wgetrc</strong></p>
<p>and uncommand the following lines so that it looks like</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">https_proxy = http://&lt;ip&gt;:&lt;port&gt;</div><div class="line">http_proxy = http://&lt;ip&gt;:&lt;port&gt;</div><div class="line">use_proxy = on</div></pre></td></tr></table></figure>
<p>This should make pacman run via sudo. </p>
<p>For other applications like firefox you can set proxy directly through</p>
<p><strong>Preferences &gt; Advanced &gt; Network &gt; Settings</strong></p>
<p>and for chrome / chromium youâ€™d need to pass argument to use proxy like<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">~$ chromium --http-proxy=&lt;ip&gt;:&lt;port&gt;</div></pre></td></tr></table></figure></p>
<p>Most of the things which need internet and work over http/https proxy should work now.</p>

  </div>
</article>



    </div>
    
      <div id="footer-post-container">
  <div id="footer-post">

    <div id="nav-footer" style="display: none">
      <ul>
         
          <li><a href="/">Home</a></li>
         
          <li><a href="/about/">About</a></li>
         
          <li><a href="/archives/">Writing</a></li>
         
          <li><a href="http://github.com/spl0i7">Projects</a></li>
        
      </ul>
    </div>

    <div id="toc-footer" style="display: none">
      <ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#1-Pass-on-environment-variables-to-root"><span class="toc-number">1.</span> <span class="toc-text">1) Pass on environment variables to root</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-Set-proxy-for-pacman"><span class="toc-number">2.</span> <span class="toc-text">2) Set proxy for pacman</span></a></li></ol>
    </div>

    <div id="share-footer" style="display: none">
      <ul>
  <li><a class="icon" href="http://www.facebook.com/sharer.php?u=http://ketansingh.net/setting-proxy-for-archlinux/"><i class="fa fa-facebook fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="https://twitter.com/share?url=http://ketansingh.net/setting-proxy-for-archlinux/&text=Setting proxy for ArchLinux."><i class="fa fa-twitter fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://www.linkedin.com/shareArticle?url=http://ketansingh.net/setting-proxy-for-archlinux/&title=Setting proxy for ArchLinux."><i class="fa fa-linkedin fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="https://pinterest.com/pin/create/bookmarklet/?url=http://ketansingh.net/setting-proxy-for-archlinux/&is_video=false&description=Setting proxy for ArchLinux."><i class="fa fa-pinterest fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="mailto:?subject=Setting proxy for ArchLinux.&body=Check out this article: http://ketansingh.net/setting-proxy-for-archlinux/"><i class="fa fa-envelope fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="https://getpocket.com/save?url=http://ketansingh.net/setting-proxy-for-archlinux/&title=Setting proxy for ArchLinux."><i class="fa fa-get-pocket fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://reddit.com/submit?url=http://ketansingh.net/setting-proxy-for-archlinux/&title=Setting proxy for ArchLinux."><i class="fa fa-reddit fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://www.stumbleupon.com/submit?url=http://ketansingh.net/setting-proxy-for-archlinux/&title=Setting proxy for ArchLinux."><i class="fa fa-stumbleupon fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://digg.com/submit?url=http://ketansingh.net/setting-proxy-for-archlinux/&title=Setting proxy for ArchLinux."><i class="fa fa-digg fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://www.tumblr.com/share/link?url=http://ketansingh.net/setting-proxy-for-archlinux/&name=Setting proxy for ArchLinux.&description="><i class="fa fa-tumblr fa-lg" aria-hidden="true"></i></a></li>
</ul>

    </div>

    <div id="actions-footer">
      <ul>
        <li id="toc"><a class="icon" href="#" onclick='$("#toc-footer").toggle();return false;'><i class="fa fa-list fa-lg" aria-hidden="true"></i> TOC</a></li>
        <li id="share"><a class="icon" href="#" onclick='$("#share-footer").toggle();return false;'><i class="fa fa-share-alt fa-lg" aria-hidden="true"></i> Share</a></li>
        <li id="top" style="display:none"><a class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fa fa-chevron-up fa-lg" aria-hidden="true"></i> Top</a></li>
        <li id="menu"><a class="icon" href="#" onclick='$("#nav-footer").toggle();return false;'><i class="fa fa-bars fa-lg" aria-hidden="true"></i> Menu</a></li>
      </ul>
    </div>

  </div>
</div>

    
    <footer id="footer">
  <div class="footer-left">
    Copyright &copy; 2017 Ketan Singh
  </div>
  <div class="footer-right">
    <nav>
      <ul>
         
          <li><a href="/">Home</a></li>
         
          <li><a href="/about/">About</a></li>
         
          <li><a href="/archives/">Writing</a></li>
         
          <li><a href="http://github.com/spl0i7">Projects</a></li>
        
      </ul>
    </nav>
  </div>
</footer>

    <script src="/lib/justified-gallery/jquery.justifiedGallery.min.js"></script>
<script src="/js/main.js"></script>
<!-- Google Analytics -->

    <script type="text/javascript">
        (function(i,s,o,g,r,a,m) {i['GoogleAnalyticsObject']=r;i[r]=i[r]||function() {
        (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
        m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
        })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
        ga('create', 'UA-47868439-2', 'auto');
        ga('send', 'pageview');
    </script>

<!-- Disqus Comments -->


</body>
</html>
